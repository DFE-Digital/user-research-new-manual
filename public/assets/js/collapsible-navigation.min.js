!function(p){"use strict";window.GOVUK.Modules.CollapsibleNavigation=function(){var s,r;function c(a){var l=!a.hasClass("is-open"),e=a.find("> a"),t=a.find(".collapsible__toggle"),n=a.find(".collapsible__toggle-label");a.toggleClass("is-open",l),t.attr("aria-expanded",l?"true":"false"),n.text(l?"Collapse "+e.text():"Expand "+e.text())}function n(a){return new URL(a.attr("href"),window.location.href).pathname}function d(){for(var a,l=window.location.pathname,e=r.length-1;0<=e;e--){var t=p(r[e]);if(n(t.find("> a"))===l){a=t;break}if(t.find("li > a").filter(function(a){return n(p(this))===l}).length){a=t;break}}a&&!a.hasClass("is-open")&&c(a)}this.start=function(a){s=p(".app-pane__content");for(var l=(r=a.find("> ul > li")).length-1;0<=l;l--){var e,t=p(r[l]),n=t.find("> a"),i=t.find("> ul"),o="toc-"+n.text().toLowerCase().replace(/\s+/g,"-");0!==i.length&&(t.addClass("collapsible"),e=[],i.each(function(a){a=o+"-"+a;e.push(a),p(this).addClass("collapsible__body").attr("id",a)}),n.addClass("collapsible__heading").after('<button class="collapsible__toggle" aria-expanded="false" aria-controls="'+e.join(" ")+'"><span class="collapsible__toggle-label">Expand '+n.text()+'</span><span class="collapsible__toggle-icon" aria-hidden="true"></button>'),t.on("click",".collapsible__toggle",function(a){a.preventDefault(),c(p(this).parent())}))}d(),s.on("scroll",_.debounce(d,100,{maxWait:100}))}}}(jQuery);